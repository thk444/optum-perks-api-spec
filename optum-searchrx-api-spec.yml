openapi: 3.0.0
info:
  version: '0.11.0'
  title: SearchRx REST API
  contact:
    name: Livefront
    url: https://livefront.com
  description: >
    REST API specification for SearchRx
security:
  - application:
      - read
      - write
paths:
  /account:
    post:
      description: |
        Creates a new anonymous user account.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
  /cities:
    get:
      description: |
        Returns cities, states, or ZIP Codes that match the query.

        This endpoint is intended to be used to display results in real time as the user types.

        When there are no results, an empty array will be returned.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/citiesQuery'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CitiesWrapper'
  /content:
    get:
      description: |
        Returns dynamic app content.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppContentWrapper'
  /coupons:
    get:
      description: |
        Returns all of the coupons for the specified account ID.

        When available, clients should specify their current location via the `location` query parameter. Results should include `nearestLocation` relative to the specified location.

        When there are no results, an empty array will be returned.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/location'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CouponsWrapper'
    post:
      description: |
        Creates a new coupon for the specified formulation.

        Note: This endpoint creates a new coupon for the current user, but the coupon will not appear in the current user's coupon list returned by `GET /coupons` until they save it via a separate request to `POST /coupons/{id}/save`.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
      requestBody:
        content:
          'application/json':
            schema:
              $ref: '#/components/schemas/CouponPost'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Coupon'
        '422':
          $ref: '#/components/responses/Error422'
  /coupons/{id}:
    get:
      description: |
        Returns details for the coupon with the specified ID for the specified account ID.

        When available, clients should specify their current location via the `location` query parameter. Results should include `nearestLocation` relative to the specified location.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/couponId'
        - $ref: '#/components/parameters/location'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Coupon'
        '404':
          $ref: '#/components/responses/Error404'
    delete:
      description: |
        Deletes the coupon with the specified ID for the specified account ID.
      parameters:
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/couponId'
      responses:
        '204':
          description: No Content
        '404':
          $ref: '#/components/responses/Error404'
  /coupons/{id}/save:
    post:
      description: |
        Saves the coupon with the specified ID to the current user's coupon list.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/couponId'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Coupon'
        '404':
          $ref: '#/components/responses/Error404'
        '422':
          $ref: '#/components/responses/Error422'
  /coupons/{id}/share:
    post:
      description: |
        Shares an existing coupon for the specified coupon ID and account ID.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/couponId'
      requestBody:
        content:
          'application/json':
            schema:
              $ref: '#/components/schemas/CouponSharePost'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CouponShare'
        '404':
          $ref: '#/components/responses/Error404'
        '422':
          $ref: '#/components/responses/Error422'
  /devices:
    post:
      description: |
        Creates a new device for the current user with the specified properties.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
      requestBody:
        content:
          'application/json':
            schema:
              $ref: '#/components/schemas/DevicePost'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Device'
        '422':
          $ref: '#/components/responses/Error422'
  /discount-cards/{id}:
    get:
      description: |
        Returns details for the discount card with the specified ID.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/discountCardId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DiscountCard'
        '404':
          $ref: '#/components/responses/Error404'
  /drugs:
    get:
      description: |
        Returns a list of drugs that match the query parameters.

        When there are no results, an empty array will be returned.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/drugsFilter'
        - $ref: '#/components/parameters/drugsSort'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DrugsWrapper'
  /drugs/{id}:
    get:
      description: |
        Returns the drug with the specified ID.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/drugId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Drug'
        '404':
          $ref: '#/components/responses/Error404'
  /drugs/{id}/images:
    get:
      description: |
        Returns images for the drug with the specified ID.

        When there are no results, an empty array will be returned.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/drugId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ImagesWrapper'
        '404':
          $ref: '#/components/responses/Error404'
  /drug-classes:
    get:
      description: |
        Returns all the drug classes.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DrugClassesWrapper'
  /drug-classes/{id}:
    get:
      description: |
        Returns the drug class with the specified ID.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/drugClassId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DrugClass'
        '404':
          $ref: '#/components/responses/Error404'
  /drug-classes/{id}/drugs:
    get:
      description: |
        Returns drugs associated with the specified drug class.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/drugClassId'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/drugsSort'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DrugsWrapper'
        '404':
          $ref: '#/components/responses/Error404'
  /health-conditions:
    get:
      description: |
        Returns all the health conditions.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/healthConditionsFilter'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthConditionsWrapper'
  /health-conditions/{id}:
    get:
      description: |
        Returns the health condition with the specified ID.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/healthConditionId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthCondition'
        '404':
          $ref: '#/components/responses/Error404'
  /health-conditions/{id}/drugs:
    get:
      description: |
        Returns drugs associated with the specified health condition.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/healthConditionId'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/drugsSort'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DrugsWrapper'
        '404':
          $ref: '#/components/responses/Error404'
  /kill-switch:
    get:
      description: |
        Check to see if a given client is still supported.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - name: platform
          in: query
          schema:
            type: string
            enum:
              - iOS
              - Android
          required: true
        - name: model
          in: query
          schema:
            type: string
          example: iPhone X
          required: true
        - name: osVersion
          in: query
          schema:
            type: string
          example: iOS 12.2
          required: true
        - name: appVersion
          in: query
          schema:
            type: string
          example: '1.4'
          required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KillSwitch'
  /preferences:
    get:
      description: |
        Returns the current user's preferences.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Preferences'
    patch:
      description: |
        Updates the current user's preferences.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
      requestBody:
        content:
          'application/json':
            schema:
              $ref: '#/components/schemas/PreferencesPatch'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Preferences'
        '422':
          $ref: '#/components/responses/Error422'
  /prices:
    get:
      description: |
        Returns prices based on the specified formulation and quantity.

        The 20 results nearest to `searchLocation` will be returned.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/formulationId'
        - $ref: '#/components/parameters/quantity'
        - $ref: '#/components/parameters/searchLocation'
        - $ref: '#/components/parameters/location'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PricesWrapper'
  /retailers:
    get:
      description: |
        Returns retailers sorted alphabetically.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/limit'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RetailersWrapper'
  /retailers/{id}/locations:
    get:
      description: |
        Returns retailer locations that match the specified search criteria.

        Results are in order by distance from the search location.

        When `searchLocation[type]` is `map`:
          - `searchLocation[radius]` is required.
          - `page` and `limit` are ignored.
          - Results will be displayed on an interactive map.

        When `searchLocation[type]` is `currentLocation`:
          - `searchLocation[radius]` is ignored.

        When there are no results, an empty array will be returned.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/retailerId'
        - $ref: '#/components/parameters/searchLocationType'
        - $ref: '#/components/parameters/searchLocationLocation'
        - $ref: '#/components/parameters/searchLocationRadius'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/limit'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RetailerLocationsWrapper'
        '404':
          $ref: '#/components/responses/Error404'
  /search:
    get:
      description: |
        Returns a list of search results that match the query parameters.

        Search results can be drugs, drug classes, or health conditions.

        This endpoint is intended to be used to display results in real time as the user types.

        When there are no results, an empty array will be returned.
      parameters:
        - $ref: '#/components/parameters/acceptLanguage'
        - $ref: '#/components/parameters/accountId'
        - $ref: '#/components/parameters/searchQuery'
        - $ref: '#/components/parameters/searchType'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/limit'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SearchWrapper'
components:
  parameters:
    acceptLanguage:
      in: header
      name: Accept-Language
      schema:
        type: string
        example: en-US
      description: Specifies which language the client is able to understand. When specified, the server should localize dynamic data, like prices and content, based on the specified language code. Static labels on the client, like headings and button labels, will be localized on the client.
    accountId:
      in: header
      name: X-Account-ID
      schema:
        type: string
        format: uuid
      description: The current user's ID, if any.
    citiesQuery:
      in: query
      name: q
      schema:
        type: string
      required: true
      description: Query to match all or part of a city, state, or ZIP Code.
      example: minneap
    couponId:
      in: path
      name: id
      required: true
      schema:
        type: string
        format: uuid
      description: The ID for a given coupon.
    discountCardId:
      in: path
      name: id
      required: true
      schema:
        type: string
        format: uuid
      description: The `urlSlug` or ID for a given discount card.
    drugClassId:
      in: path
      name: id
      required: true
      schema:
        type: string
        format: uuid
      description: The ID for a drug class.
    drugId:
      in: path
      name: id
      required: true
      schema:
        type: string
        format: uuid
      description: The ID for a given drug.
    drugsFilter:
      in: query
      name: filter
      schema:
        type: string
        enum:
          - common
          - popular
      required: false
      description: |
        Filters the results based on the specified value.
          - `common`: Includes the most common drugs. These are configured by hand on the backend specifically for SEO.
          - `popular`: Includes the most popular drugs.
      example: common
    drugsSort:
      in: query
      name: sort
      schema:
        type: string
        enum:
          - name
          - -name
          - popularity
          - -popularity
      required: false
      description: |
        Sorts the results based on the specified value.
          - `name`: Sorts results alphabetically.
          - `-name`: Sorts results reverse-alphabetically.
          - `popularity`: Sorts results by popularity. Most popular first.
          - `-popularity`: Sorts results by popularity. Least popular first.
      example: name
    formulationId:
      in: query
      name: formulationId
      schema:
        type: string
        format: uuid
      required: true
    healthConditionId:
      in: path
      name: id
      required: true
      schema:
        type: string
        format: uuid
      description: The ID for a health condition.
    healthConditionsFilter:
      in: query
      name: filter
      schema:
        type: string
        enum:
          - common
      required: false
      description: |
        Filters the results based on the specified value.
          - `common`: Includes the most common health conditions. These are configured by hand on the backend specifically for SEO.
      example: common
    limit:
      in: query
      name: limit
      schema:
        type: integer
      description: Indicates how many results to return per page.
      example: 50
    location:
      in: query
      name: location
      schema:
        type: string
      description: The user's current location. Format is `[latitude],[longitude]`.
      example: 44.949782,-93.285233
    page:
      in: query
      name: page
      schema:
        type: integer
      description: Indicates which page of results to load.
      example: 3
    quantity:
      in: query
      name: quantity
      schema:
        type: number
        format: double
        example: 30
      required: true
      description: Indicates how many units are included in the price.
    retailerId:
      in: path
      name: id
      required: true
      schema:
        type: string
        format: uuid
      description: The ID for a given retailer.
    searchLocation:
      in: query
      name: searchLocation
      required: true
      schema:
        type: string
      description: The center of the search area. Format is `[latitude],[longitude]`.
      example: 44.949782,-93.285233
    searchLocationLocation:
      in: query
      name: searchLocation[location]
      required: true
      schema:
        type: string
      description: The center of the search area. Format is `[latitude],[longitude]`.
      example: 44.949782,-93.285233
    searchLocationRadius:
      in: query
      name: searchLocation[radius]
      schema:
        type: string
      description: The radius in meters of a circle centered around `searchLocation[location]`. Matching results within the circle will be returned. This parameter is required when `searchLocation[type]` is `map`.
      example: 1000.0
    searchLocationType:
      in: query
      name: searchLocation[type]
      schema:
        type: string
        enum:
          - currentLocation
          - map
      required: true
      description: |
        - `currentLocation`: Search around the user's current location.
        - `map`: Search an area of a map. Requires a center point and radius `searchLocation[radius]`.
      example: map
    searchQuery:
      in: query
      name: q
      schema:
        type: string
      required: true
      description: Query that describes what to search for. For drugs, this value can match any part of a drug's generic or brand names.
      example: Atorvastatin
    searchType:
      in: query
      name: type
      schema:
        type: string
        enum:
          - drug
          - drugClass
          - healthCondition
        default: drug
      required: false
      description: Restricts results to include values of the specified type. If no value is specified, `drug` is used.
  schemas:
    AppContent:
      type: object
      properties:
        id:
          type: string
          format: uuid
        title:
          type: string
          example: Help
        html:
          type: string
          example: >
            <p>This is the content for the Help section.</p>
    AppContentWrapper:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/AppContent'
        metadata:
          $ref: '#/components/schemas/PageMetadataNull'
    CitiesWrapper:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/City'
        metadata:
          $ref: '#/components/schemas/PageMetadataNull'
    City:
      type: object
      properties:
        name:
          type: string
          example: Minneapolis, MN
        zip:
          type: string
          example: '55401'
        coordinates:
          $ref: '#/components/schemas/Location'
    Content:
      type: object
      properties:
        id:
          type: string
          format: uuid
        title:
          type: string
          example: Proper Use
        html:
          type: string
          example: >
            <p>This is the content for the Proper Use section.</p>
        legalDisclaimer:
          type: string
          example: A disclaimer is generally any statement intended to specify or delimit the scope of rights and obligations that may be exercised and enforced by parties in a legally recognized relationship. In contrast to other terms for legally operative language, the term disclaimer usually implies situations that involve some level of uncertainty, waiver, or risk.
    Coupon:
      type: object
      properties:
        id:
          type: string
          format: uuid
        bin:
          type: string
          example: '009999'
        grp:
          type: string
          example: ABC123
        pcn:
          type: string
          example: ABCDEF
        uid:
          type: string
          example: ABC1234567
        price:
          $ref: '#/components/schemas/Price'
        nearestLocation:
          $ref: '#/components/schemas/RetailerLocation'
    CouponPost:
      type: object
      properties:
        formulationId:
          type: string
          format: uuid
        quantity:
          type: number
          format: double
          example: 30
        locationId:
          type: string
          format: uuid
    CouponShare:
      type: object
      properties:
        defaultShareText:
          type: string
          example: >
            Atorvastatin Card:
            MemberID: ABC1234567
            RxGroup: ABC123
            RxBin: 009999
            RxPCN: ABCDEF
            Pharmacist: 1-888-111-1111
            Questions: 1-888-111-1111
            https://searchrx.com/123
        defaultShareImageUrl:
          type: string
          example: https://example.com/coupon.png
        coupon:
          $ref: '#/components/schemas/Coupon'
    CouponSharePost:
      type: object
      properties:
        shareType:
          type: string
          enum:
            - textMessage
            - email
            - mobileAppShareSheet
        email:
          type: string
          format: email
          description: Required when `shareType` is `email`.
        phoneNumber:
          type: string
          example: '612-111-1111'
          description: Required when `shareType` is `textMessage`.
    CouponsWrapper:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/Coupon'
        metadata:
          $ref: '#/components/schemas/PageMetadataNull'
    Device:
      type: object
      properties:
        id:
          type: string
          format: uuid
        deviceToken:
          type: string
          format: uuid
          description: Push notification token provided by iOS or Android. This value is not always immediately available, so it's optional. The device may make a second post that includes this value.
          nullable: true
        deviceIdentifier:
          type: string
          format: uuid
          description: Persistent, unique identifier for this device generated by the client.
        platform:
          type: string
          enum:
            - iOS
            - Android
        model:
          type: string
          example: iPhone X
        osVersion:
          type: string
          example: iOS 12.2
        appVersion:
          type: string
          example: '1.4'
    DevicePost:
      type: object
      properties:
        deviceToken:
          type: string
          format: uuid
          description: Push notification token provided by iOS or Android. This value is not always immediately available, so it's optional. The device may make a second post that includes this value. If a record already exists for this device, then the values should be updated.
          nullable: true
        deviceIdentifier:
          type: string
          format: uuid
          description: Persistent, unique identifier for this device generated by the client.
        platform:
          type: string
          enum:
            - iOS
            - Android
        model:
          type: string
          example: iPhone X
        osVersion:
          type: string
          example: iOS 12.2
        appVersion:
          type: string
          example: '1.4'
    DiscountCard:
      type: object
      properties:
        id:
          type: string
          format: uuid
        pageTitle:
          type: string
          example: Get your free AARP Discount Card!
        partnerName:
          type: string
          example: AARP
        partnerLogoUrl:
          type: string
          example: https://example.com/logo.png
        discountCardImageUrl:
          type: string
          example: https://example.com/image.png
        urlSlug:
          type: string
          example: aarp
          nullable: true
    Drug:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          example: Atorvastatin
        otherNames:
          type: string
          example: Generic Lipitor
          description: This value will be `null` unless this formulation is generic.
          nullable: true
        brands:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                example: Lipitor
              urlSlug:
                type: string
                example: lipitor
                nullable: true
        formulations:
          type: array
          items:
            $ref: '#/components/schemas/Formulation'
          example:
            -
              id: 30d048c3-4a4a-4c96-902b-9b29317893af
              drugId: 3fa85f64-5717-4562-b3fc-2c963f66afa6
              gpi14: '39400010100330'
              name: Atorvastatin
              otherNames: Generic Lipitor
              form: Tablet
              pluralForm: Tablets
              dosage:
                value: 10
                unit: mg
                display: 10 mg
              commonQuantities:
                -
                  value: 30
                  display: 30 tablets
                  ndc: '50090-1254-0'
                -
                  value: 60
                  display: 60 tablets
                  ndc: '50090-1254-1'
                -
                  value: 90
                  display: 90 tablets
                  ndc: '50090-1254-2'
            -
              id: ee26ed45-dd92-44c0-8e11-fe513420e17b
              drugId: 3fa85f64-5717-4562-b3fc-2c963f66afa6
              gpi14: '39400010100360'
              name: Atorvastatin
              otherNames: Generic Lipitor
              form: Tablet
              pluralForm: Tablets
              dosage:
                value: 20
                unit: mg
                display: 20 mg
              commonQuantities:
                -
                  value: 30
                  display: 30 tablets
                  ndc: '50090-1255-0'
                -
                  value: 60
                  display: 60 tablets
                  ndc: '50090-1255-1'
                -
                  value: 90
                  display: 90 tablets
                  ndc: '50090-1255-2'
            -
              id: 8275d9d5-cc08-4d1c-b37d-2855da4b6a4f
              drugId: 3fa85f64-5717-4562-b3fc-2c963f66afa6
              gpi14: '58200060100105'
              name: Lipitor
              otherNames: null
              form: Tablet
              pluralForm: Tablets
              dosage:
                value: 10
                unit: mg
                display: 10 mg
              commonQuantities:
                -
                  value: 60
                  display: 60 tablets
                  ndc: '50090-9932-0'
        info:
          type: array
          items:
            $ref: '#/components/schemas/Content'
        therapeuticClassifications:
          type: string
          example: Antihyperlipidemic
          nullable: true
        pharmacologicClassifications:
          type: string
          example: HMG-COA Reductase Inhibitor
          nullable: true
        urlSlugs:
          type: array
          items:
            type: string
          example:
            - atorvastatin
            - lipitor
        medicare:
          type: object
          properties:
            isCovered:
              type: boolean
            explanation:
              type: string
              example: 100% of Medicare Part D and Medicare Advantage plans cover this drug.
              nullable: true
        sideEffects:
          type: object
          properties:
            overview:
              type: string
              example: This is not a complete list of side effects and others may occur. Call your doctor for medical advice about side effects.
              nullable: true
            commonSideEffectsOverview:
              type: string
              example: Aliquam in scelerisque neque, vitae dignissim eros. In non luctus augue, sed pellentesque risus. Etiam pellentesque rutrum elit, eu lobortis turpis efficitur ullamcorper.
              nullable: true
            commonSideEffects:
              type: array
              items:
                type: string
                example: dizziness
            rareSideEffectsOverview:
              type: string
              example: Aliquam in scelerisque neque, vitae dignissim eros. In non luctus augue, sed pellentesque risus. Etiam pellentesque rutrum elit, eu lobortis turpis efficitur ullamcorper.
              nullable: true
            rareSideEffects:
              type: array
              items:
                type: string
                example: dizziness
    DrugClass:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          example: ACE Inhibitors
        description:
          type: string
          example: An angiotensin-converting-enzyme inhibitor (ACE inhibitor) is a pharmaceutical drug used primarily for the treatment of hypertension (elevated blood pressure) and congestive heart failure.
          nullable: true
        html:
          type: string
          example: >
            <p>This group of drugs causes relaxation of blood vessels as well as a decrease in blood volume, which leads to lower blood pressure and decreased oxygen demand from the heart. They inhibit the angiotensin-converting enzyme, an important component of the reninâ€“angiotensin system.

            Frequently prescribed ACE inhibitors include benazepril, zofenopril, perindopril, trandolapril, captopril, enalapril, lisinopril, and ramipril.</p>
          nullable: true
        urlSlugs:
          type: array
          items:
            type: string
          example:
            - ace-inhibitors
            - ace-inhibitor
        healthConditions:
          items:
            $ref: '#/components/schemas/DrugClassHealthCondition'
          description: Indicates which health conditions this class of drug is popularly prescribed for.
    DrugClassHealthCondition:
      type: object
      properties:
        healthCondition:
          $ref: '#/components/schemas/HealthCondition'
        popularity:
          type: string
          example: '35%'
          description: This value is displayed to the user to indicate popularity.
          nullable: true
    DrugClassesWrapper:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/DrugClass'
        metadata:
          $ref: '#/components/schemas/PageMetadataNull'
    DrugHealthCondition:
      type: object
      properties:
        healthCondition:
          $ref: '#/components/schemas/HealthCondition'
        popularity:
          type: string
          example: 'Most Popular'
          description: This value is displayed to the user to indicate popularity.
    DrugsWrapper:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/Drug'
        metadata:
          $ref: '#/components/schemas/PageMetadata'
    Error404:
      type: object
      properties:
        message:
          type: string
          example: The resource {resource name} could not be found.
    Error422:
      type: object
      properties:
        errors:
          type: array
          items:
            type: object
            properties:
              fieldName:
                type: string
                example: '{fieldName}'
                nullable: true
              message:
                type: string
                example: The {fieldName} field cannot be blank.
                nullable: true
    FavoriteLocationPreference:
      type: object
      properties:
        id:
          type: string
          format: uuid
        retailer:
          $ref: '#/components/schemas/Retailer'
    Formulation:
      type: object
      properties:
        id:
          type: string
          format: uuid
        drugId:
          type: string
          format: uuid
        gpi14:
          $ref: '#/components/schemas/GPI14'
          nullable: true
        name:
          type: string
          example: Atorvastatin
          description: The name of the drug. This could be the generic name or a brand name.
        otherNames:
          type: string
          example: Generic Lipitor
          description: This value will be `null` unless this formulation is generic.
          nullable: true
        form:
          type: string
          example: Tablet
        pluralForm:
          type: string
          example: Tablets
          nullable: true
        dosage:
          type: object
          properties:
            value:
              type: number
              format: double
              example: 40
            unit:
              type: string
              example: mg
            display:
              type: string
              example: 40 mg
        commonQuantities:
          type: array
          items:
            $ref: '#/components/schemas/Quantity'
    GPI14:
      type: string
      example: '39400010100330'
      description: |
        Medispan Generic Product Identifier
        https://www.wolterskluwercdi.com/drug-data/gpi/
    HealthCondition:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          description: The clinical name for this condition.
          example: Allergic Rhinitis
        commonName:
          type: string
          description: Commonly known as.
          example: Allergies
          nullable: true
        description:
          type: string
          example: This is a brief description of the health condition.
          nullable: true
        html:
          type: string
          example: >
            <p>A damaging immune response by the body to a substance, especially pollen, fur, a particular food, or dust, to which it has become hypersensitive.</p>
          nullable: true
        heroImageUrl:
          type: string
          example: https://example.com/image.png
          nullable: true
        heroIconUrl:
          type: string
          example: https://example.com/image.png
          nullable: true
        isCommon:
          type: boolean
          description: Indicates whether or not this is a common health condition.
        urlSlugs:
          type: array
          items:
            type: string
          example:
            - allergies
            - seasonal-allergies
            - allergic-rhinitis
    HealthConditionsWrapper:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/HealthCondition'
        metadata:
          $ref: '#/components/schemas/PageMetadataNull'
    Image:
      type: object
      properties:
        id:
          type: string
          format: uuid
        imageUrl:
          type: string
          example: https://example.com/image.png
        title:
          type: string
          example: Atorvastatin Calcium 40 mg Tablet
        appearance:
          type: string
          example: Yellow, round tablet
          nullable: true
        imprint:
          type: string
          example: HLA 40
          nullable: true
        manufacturer:
          type: string
          example: Teva Pharmaceuticals USA
          nullable: true
    ImagesWrapper:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/Image'
        metadata:
          $ref: '#/components/schemas/PageMetadataNull'
    KillSwitch:
      type: object
      properties:
        isSupported:
          type: boolean
          example: false
        error:
          type: object
          properties:
            title:
              type: string
              example: New Version Available
            message:
              type: string
              example: This version is no longer supported. Please update to the latest version.
        url:
          type: string
          example: https://example.com/new-version-info.html
          description: The user can open this URL to review upgrade details or install the latest version of the app.
          nullable: true
    Location:
      type: object
      properties:
        latitude:
          type: number
          format: double
          example: 44.949782
        longitude:
          type: number
          format: double
          example: -93.285233
    NDC:
      type: string
      example: '50090-1254-0'
      description: |
        National Drug Code from the FDA
        https://www.fda.gov/drugs/drug-approvals-and-databases/national-drug-code-directory
      nullable: true
    NotificationPreference:
      type: object
      properties:
        id:
          type: string
          format: uuid
        type:
          type: string
          enum:
            - priceAlerts
            - drugNews
        enabled:
          type: boolean
    OperatingHours:
      type: object
      properties:
        open:
          type: object
          properties:
            day:
              type: string
              example: Sunday
            time:
              type: string
              example: '08:30'
              description: The hour and minute in 24-hour time.
        close:
          type: object
          properties:
            day:
              type: string
              example: Sunday
            time:
              type: string
              example: '22:00'
              description: The hour and minute in 24-hour time.
      description: Indicates a single opening and closing window for this location.
    PageMetadata:
      type: object
      properties:
        count:
          type: integer
          example: 1
          description: The number of results in this payload.
        currentPage:
          type: integer
          example: 1
          description: The current page index.
        totalCount:
          type: integer
          example: 1
          description: The total number of results available.
        totalPages:
          type: integer
          example: 1
          description: The total number of pages available.
    PageMetadataNull:
      type: object
      example: null
    Preferences:
      type: object
      properties:
        favoriteLocations:
          type: array
          items:
            $ref: '#/components/schemas/FavoriteLocationPreference'
        notifications:
          type: array
          items:
            $ref: '#/components/schemas/NotificationPreference'
    PreferencesPatch:
      type: object
      properties:
        favoriteLocations:
          type: array
          items:
            type: object
            properties:
              locationId:
                type: string
                format: uuid
          description: These values will overwrite the existing list of favorite locations.
        notifications:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                format: uuid
              enabled:
                type: boolean
    Price:
      type: object
      properties:
        formulation:
          $ref: '#/components/schemas/Formulation'
        quantity:
          $ref: '#/components/schemas/Quantity'
        retailer:
          $ref: '#/components/schemas/Retailer'
        originalPrice:
          $ref: '#/components/schemas/PriceAmount'
        price:
          $ref: '#/components/schemas/PriceAmount'
        priceLevel:
          type: string
          enum:
            - low
            - medium
            - high
        priceTypes:
          type: array
          items:
            type: string
            enum:
              - retail
              - coupon
              - searchRx
            description: |
              `searchRx` is a placeholder for a future price classification specific to this app.
        fulfillmentType:
          type: string
          enum:
            - retail
            - mailOrder
        isLowestPrice:
          type: boolean
        otherPrices:
          type: array
          items:
            $ref: '#/components/schemas/Price'
          description: Nested price objects for comparison to this price.
          example: [] # Note: Swagger doesn't currently allow recursive objects, so leave this [].
    PriceAmount:
      type: object
      properties:
        amount:
          type: string
          example: "10.50"
          description: The decimal value of the price encoded as a string. String representation prevents encoding errors since JSON doesn't allow numeric precision to be specified. Clients should parse this value as a string and convert to decimal.
        currency:
          type: string
          description: The ISO 4217 currency code for this price.
          example: USD
        display:
          type: string
          example: "$10.50"
    PricesWrapper:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/Price'
        metadata:
          $ref: '#/components/schemas/PageMetadataNull'
    Quantity:
      type: object
      properties:
        value:
          type: number
          format: double
          example: 30
        display:
          type: string
          example: "30 tablets"
        ndc:
          $ref: '#/components/schemas/NDC'
    Retailer:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          example: Target
        isPopular:
          type: boolean
        isFavorite:
          type: boolean
          description: Indicates whether or not this retailer has a location in the current user's favorites.
        isMembershipRequired:
          type: boolean
        membershipDetailsUrl:
          type: string
          example: https://rcam.target.com/#/
          nullable: true
        logoUrl:
          type: string
          example: https://example.com/logo.png
        location:
          $ref: '#/components/schemas/RetailerLocation'
    RetailersWrapper:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/Retailer'
        metadata:
          $ref: '#/components/schemas/PageMetadata'
    RetailerLocation:
      type: object
      properties:
        id:
          type: string
          format: uuid
        isFavorite:
          type: boolean
          description: Indicates whether or not this location is included in the current user's favorites.
        addressLine1:
          type: string
          example: 123 Main St.
          nullable: true
        addressLine2:
          type: string
          nullable: true
        city:
          type: string
          example: Minneapolis
          nullable: true
        state:
          type: string
          example: MN
          nullable: true
        zipCode:
          type: string
          example: '55401'
          nullable: true
        tzDatabaseName:
          type: string
          example: America/Chicago
          description: The `tz database` name for this location's time zone. Used for calculating whether or not this location is open for the current user. This has a slight advantage over UTC offset, since clients can independently account for daylight saving time when applicable.
          nullable: true
        hours:
          type: array
          items:
            $ref: '#/components/schemas/OperatingHours'
        websiteUrl:
          type: string
          example: https://target.com
          nullable: true
        phoneNumber:
          type: string
          example: (612) 111-1111
          nullable: true
        coordinates:
          $ref: '#/components/schemas/Location'
        rating:
          type: object
          properties:
            title:
              type: string
              example: 4.1 out of 5 Stars
            description:
              type: string
              example: From 52 reviews on Yelp
            url:
              type: string
              example: https://www.yelp.com/biz/target-minneapolis-2
          nullable: true
        distanceFromSearchLocation:
          type: number
          format: double
          description: The distance in meters to this location from the search location. This value is only included when relevant. For example, this value must be present when this location is returned as part of a response to a price query.
          nullable: true
    RetailerLocationsWrapper:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/RetailerLocation'
        metadata:
          $ref: '#/components/schemas/PageMetadata'
    SearchResult:
      type: object
      properties:
        id:
          type: string
          format: uuid
        type:
          type: string
          enum:
            - drug
            - drugClass
            - healthCondition
        title:
          type: string
        subtitle:
          type: string
          nullable: true
    SearchWrapper:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/SearchResult'
        metadata:
          $ref: '#/components/schemas/PageMetadata'
      example:
        data:
          -
            id: 4de2d854-cdef-4cb7-a5f6-5996b0120a75
            type: drug
            title: Atorvastatin
            subtitle: Generic Lipitor
          -
            id: 9bd9b0f5-261a-4b5e-9fd6-394fa54582c7
            type: drug
            title: Lipitor
            subtitle: Atorvastatin
          -
            id: 9cf9ef80-59d9-446b-b311-2caeaaeff43c
            type: drug
            title: Altoprev
            subtitle: null
        metadata:
          count: 1
          currentPage: 1
          totalCount: 3
          totalPages: 1
    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: A unique identifier for the user. This value should be sent as the `X-Account-ID` header value for subsequent requests.
  responses:
    Error404:
      description: |
        Returned when:
          - The resource with the specified ID can't be found.
          - The current user does not have access to the resource with this ID.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error404'
    Error422:
      description: |
        Returned when request fails due to a validation errorâ€“usually a missing a required field.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error422'
